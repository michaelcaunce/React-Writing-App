(window.webpackJsonp=window.webpackJsonp||[]).push([[3],{213:function(e,t,a){"use strict";a.r(t);var o=a(0),n=a.n(o),l=a(9),r=a(4),c=a(3),s=a(2),i=a.n(s),u=a(11),m=a(12),f=a(18),p=a(22);var g=function(){const{username:e}=Object(r.f)(),[t,a]=Object(o.useState)(!0),[l,c]=Object(o.useState)([]);return Object(o.useEffect)(()=>{const t=i.a.CancelToken.source();return async function(){try{const o=await i.a.get(`/profile/${e}/posts`,{cancelToken:t.token});c(o.data),a(!1)}catch(e){console.log("There was an error or the request was cancelled")}}(),()=>{t.cancel()}},[e]),t?n.a.createElement(f.a,null):n.a.createElement("div",{className:"list-group"},l.length&&l.map(e=>n.a.createElement(p.a,{noAuthor:!0,post:e,key:e._id})))};var w=function(e){const t=Object(o.useContext)(u.a),{username:a}=Object(r.f)(),[l,s]=Object(o.useState)(!0),[m,p]=Object(o.useState)([]);return Object(o.useEffect)(()=>{const e=i.a.CancelToken.source();return async function(){try{const t=await i.a.get(`/profile/${a}/followers`,{cancelToken:e.token});p(t.data),s(!1)}catch(e){console.log("There was a problem.")}}(),()=>{e.cancel()}},[a]),l?n.a.createElement(f.a,null):n.a.createElement("div",{className:"list-group"},m.length>0&&m.map((e,t)=>n.a.createElement(c.b,{key:t,to:"/profile/"+e.username,className:"list-group-item list-group-item-action"},n.a.createElement("img",{className:"avatar-tiny",src:e.avatar})," ",e.username)),0==m.length&&t.user.username==a&&n.a.createElement("p",{className:"lead text-muted text-center"},"You don’t have any followers yet."),0==m.length&&t.user.username!=a&&n.a.createElement("p",{className:"lead text-muted text-center"},a," doesn’t have any followers yet.",t.loggedIn&&" Be the first to follow them!",!t.loggedIn&&n.a.createElement(n.a.Fragment,null," ","If you want to follow them you need to ",n.a.createElement(c.b,{to:"/"},"sign up")," for an account first."," ")))};var d=function(e){const t=Object(o.useContext)(u.a),{username:a}=Object(r.f)(),[l,s]=Object(o.useState)(!0),[m,p]=Object(o.useState)([]);return Object(o.useEffect)(()=>{const e=i.a.CancelToken.source();return async function(){try{const t=await i.a.get(`/profile/${a}/following`,{cancelToken:e.token});p(t.data),s(!1)}catch(e){console.log("There was a problem.")}}(),()=>{e.cancel()}},[a]),l?n.a.createElement(f.a,null):n.a.createElement("div",{className:"list-group"},m.length>0&&m.map((e,t)=>n.a.createElement(c.b,{key:t,to:"/profile/"+e.username,className:"list-group-item list-group-item-action"},n.a.createElement("img",{className:"avatar-tiny",src:e.avatar})," ",e.username)),0==m.length&&t.user.username==a&&n.a.createElement("p",{className:"lead text-muted text-center"},"You aren’t following anyone yet."),0==m.length&&t.user.username!=a&&n.a.createElement("p",{className:"lead text-muted text-center"},a," isn’t following anyone yet."))},E=a(19);t.default=function(){const{username:e}=Object(r.f)(),t=Object(o.useContext)(u.a),[a,s]=Object(m.a)({followActionLoading:!1,startFollowingRequestCount:0,stopFollowingRequestCount:0,profileData:{profileUsername:"...",profileAvatar:"https://gravatar.com/avatar/placeholder?s=128",isFollowing:!1,counts:{postCount:"",followerCount:"",followingCount:""}},notFound:!1});return Object(o.useEffect)(()=>{const a=i.a.CancelToken.source();return async function(){try{const o=await i.a.post("/profile/"+e,{token:t.user.token},{cancelToken:a.token});s(e=>{o.data?e.profileData=o.data:e.notFound=!0})}catch(e){console.log("There was a problem.")}}(),()=>{a.cancel()}},[e]),Object(o.useEffect)(()=>{if(a.startFollowingRequestCount){s(e=>{e.followActionLoading=!0});const e=i.a.CancelToken.source();return async function(){try{await i.a.post("/addFollow/"+a.profileData.profileUsername,{token:t.user.token},{cancelToken:e.token});s(e=>{e.profileData.isFollowing=!0,e.profileData.counts.followerCount++,e.followActionLoading=!1})}catch(e){console.log("There was an error or the request was cancelled")}}(),()=>{e.cancel()}}},[a.startFollowingRequestCount]),Object(o.useEffect)(()=>{if(a.stopFollowingRequestCount){s(e=>{e.followActionLoading=!0});const e=i.a.CancelToken.source();return async function(){try{await i.a.post("/removeFollow/"+a.profileData.profileUsername,{token:t.user.token},{cancelToken:e.token});s(e=>{e.profileData.isFollowing=!1,e.profileData.counts.followerCount--,e.followActionLoading=!1})}catch(e){console.log("There was an error or the request was cancelled")}}(),()=>{e.cancel()}}},[a.stopFollowingRequestCount]),a.notFound?n.a.createElement(l.a,{title:"Profile not found!"},n.a.createElement(E.a,null)):n.a.createElement(l.a,{title:e+"'s Profile"},n.a.createElement("div",{className:"content-container"},n.a.createElement("h2",null,n.a.createElement("img",{className:"avatar-small",src:a.profileData.profileAvatar})," ",a.profileData.profileUsername,t.loggedIn&&!a.profileData.isFollowing&&t.user.username!=a.profileData.profileUsername&&"..."!=a.profileData.profileUsername&&n.a.createElement("button",{onClick:function(){s(e=>{e.startFollowingRequestCount++})},disabled:a.followActionLoading,className:"btn btn-primary btn-sm ml-2"},"Follow ",n.a.createElement("i",{className:"fas fa-user-plus"})),t.loggedIn&&a.profileData.isFollowing&&t.user.username!=a.profileData.profileUsername&&"..."!=a.profileData.profileUsername&&n.a.createElement("button",{onClick:function(){s(e=>{e.stopFollowingRequestCount++})},disabled:a.followActionLoading,className:"btn btn-danger btn-sm ml-2"},"Unfollow ",n.a.createElement("i",{className:"fas fa-user-times"}))),n.a.createElement("div",{className:"profile-nav nav nav-tabs pt-2 mb-4"},n.a.createElement(c.c,{exact:!0,to:"/profile/"+a.profileData.profileUsername,className:"nav-item nav-link"},"Posts: ",a.profileData.counts.postCount),n.a.createElement(c.c,{to:`/profile/${a.profileData.profileUsername}/followers`,className:"nav-item nav-link"},"Followers: ",a.profileData.counts.followerCount),n.a.createElement(c.c,{to:`/profile/${a.profileData.profileUsername}/following`,className:"nav-item nav-link"},"Following: ",a.profileData.counts.followingCount)),n.a.createElement(r.c,null,n.a.createElement(r.a,{exact:!0,path:"/profile/:username"},n.a.createElement(g,null)),n.a.createElement(r.a,{path:"/profile/:username/followers"},n.a.createElement(w,null)),n.a.createElement(r.a,{path:"/profile/:username/following"},n.a.createElement(d,null)))))}}}]);